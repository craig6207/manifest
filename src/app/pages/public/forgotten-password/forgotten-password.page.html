<ion-header no-shadow>
  <app-toolbar-back
    title="Forgot password?"
    navigation="/login"
  ></app-toolbar-back>
</ion-header>

<ion-content class="forgot-page">
  <section>
    <div
      class="info-card ion-padding"
      role="note"
      aria-label="Password reset info"
    >
      <div class="info-icon ion-padding-top">
        <ion-icon
          name="information-circle-outline"
          aria-hidden="true"
        ></ion-icon>
      </div>
      <p class="ion-padding-end">
        Enter the email for your account. We'll text a verification code to the
        phone number linked to it.
      </p>
    </div>
  </section>
  <section class="form-card">
    <form
      [formGroup]="form"
      (ngSubmit)="onSubmit()"
      novalidate
      class="form-default"
    >
      <ion-list lines="none" class="form-list ion-margin">
        <label class="field-label ion-padding" for="forgot-email">Email</label>
        <ion-item class="input-item" lines="none">
          <ion-input
            id="forgot-email"
            formControlName="email"
            type="email"
            placeholder="Enter email"
            autocapitalize="off"
            autocomplete="email"
            inputmode="email"
          ></ion-input>
        </ion-item>

        @if (form.get('email')!.invalid && (form.get('email')!.touched ||
        submitAttempt)) { @if (form.get('email')!.errors?.['required']) {
        <div class="error">Email is required.</div>
        } @if (form.get('email')!.errors?.['email']) {
        <div class="error">Please enter a valid email.</div>
        } }
      </ion-list>
    </form>
  </section>
</ion-content>
<ion-footer class="ion-no-border ion-padding">
  <ion-button
    expand="block"
    color="primary"
    type="submit"
    expand="block"
    [disabled]="form.invalid || isLoading"
    aria-label="Send password reset code"
    >Send confirmation</ion-button
  >
</ion-footer>

<ion-loading
  [isOpen]="isLoading"
  message="Sending code..."
  spinner="crescent"
  translucent="true"
  backdropDismiss="false"
></ion-loading>

<ion-toast
  [isOpen]="toastOption.show"
  position="top"
  [color]="toastOption.color"
  [message]="toastOption.message"
  duration="4000"
  keyboardClose="true"
  (didDismiss)="setToast()"
></ion-toast>
