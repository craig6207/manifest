<ion-content [fullscreen]="true" class="forgot-page">
  <div class="page-inner">
    <section class="hero">
      <div class="hero-top">
        <ion-button
          fill="clear"
          size="small"
          class="back-btn"
          (click)="goBack()"
          aria-label="Back to login"
        >
          <ion-icon name="chevron-back-outline" slot="icon-only"></ion-icon>
        </ion-button>
      </div>

      <img
        class="hero-logo"
        src="/assets/img/Recruut_logo.svg"
        alt="WeRecruit logo"
      />

      <h1 class="hero-title">Reset password</h1>
      <p class="hero-subtitle">
        Enter the email for your account. We'll text a verification code to the
        phone number linked to it.
      </p>
    </section>

    <section class="form-card">
      <form class="form-default" [formGroup]="form" (ngSubmit)="onSubmit()">
        <ion-list class="form-list" lines="none">
          <ion-item class="input-item">
            <ion-icon name="mail-outline" slot="start"></ion-icon>
            <ion-input
              #emailInput
              formControlName="email"
              type="email"
              placeholder="Email"
              autocapitalize="off"
              autocomplete="email"
              inputmode="email"
            ></ion-input>
          </ion-item>

          @if (form.get('email')!.invalid && (form.get('email')!.touched ||
          submitAttempt)) { @if (form.get('email')!.errors?.['required']) {
          <div class="error">Email is required.</div>
          } @if (form.get('email')!.errors?.['email']) {
          <div class="error">Please enter a valid email.</div>
          } }
        </ion-list>

        <ion-button
          class="primary-btn"
          type="submit"
          expand="block"
          [disabled]="form.invalid || isLoading"
          aria-label="Send password reset code"
        >
          Send code
        </ion-button>

        <ion-loading
          [isOpen]="isLoading"
          message="Sending code..."
          spinner="crescent"
          translucent="true"
          backdropDismiss="false"
        ></ion-loading>
      </form>

      <ion-toast
        [isOpen]="toastOption.show"
        position="top"
        [color]="toastOption.color"
        [message]="toastOption.message"
        duration="4000"
        keyboardClose="true"
        (didDismiss)="setToast()"
      ></ion-toast>
    </section>
  </div>
</ion-content>
