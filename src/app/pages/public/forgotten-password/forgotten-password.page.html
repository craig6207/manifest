<ion-header>
  <ion-toolbar color="primary" class="ion-no-border">
    <ion-buttons slot="start">
      <ion-back-button
        text="Back to login"
        defaultHref="/login"
        aria-label="Go back to login"
      ></ion-back-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true" class="auth-content">
  <section class="hero ion-padding-horizontal">
    <ion-img
      class="logo ion-padding-bottom"
      src="/assets/img/WeRecruit_logo.svg"
      alt="WeRecruit logo"
    ></ion-img>
    <p class="ion-text-center ion-padding-top">
      Enter the email for your account. We'll text a verification code to the
      phone number linked to it.
    </p>
  </section>

  <section class="auth-card ion-padding">
    <form class="form-default" [formGroup]="form" (ngSubmit)="onSubmit()">
      <ion-list class="form-list" lines="none">
        <ion-item class="field">
          <ion-input
            #emailInput
            label="Email"
            labelPlacement="stacked"
            formControlName="email"
            type="email"
            placeholder="you@example.com"
            autocapitalize="off"
            autocomplete="email"
            inputmode="email"
          ></ion-input>
        </ion-item>

        @if (form.get('email')!.invalid && (form.get('email')!.touched ||
        submitAttempt)) { @if (form.get('email')!.errors?.['required']) {
        <div class="error">Email is required.</div>
        } @if (form.get('email')!.errors?.['email']) {
        <div class="error">Please enter a valid email.</div>
        } }
      </ion-list>

      <ion-button
        class="primary-btn ion-margin-top"
        type="submit"
        expand="block"
        color="primary"
        [disabled]="form.invalid || isLoading"
        aria-label="Send password reset code"
      >
        Send code
      </ion-button>

      <ion-loading
        [isOpen]="isLoading"
        message="Sending code..."
        spinner="crescent"
        translucent="true"
        backdropDismiss="false"
      ></ion-loading>
    </form>
  </section>

  <ion-toast
    [isOpen]="toastOption.show"
    position="top"
    [color]="toastOption.color"
    [message]="toastOption.message"
    duration="4000"
    keyboardClose="true"
    (didDismiss)="setToast()"
  ></ion-toast>

  <div class="copyright ion-text-center">
    <ion-text color="medium">
      <small>&copy; 2025 WeRecruit</small>
    </ion-text>
  </div>
</ion-content>
