<ion-header>
  <ion-toolbar color="primary" class="ion-no-border">
    <ion-buttons slot="start">
      <ion-back-button
        text="Back"
        defaultHref="/"
        aria-label="Go back to welcome page"
      ></ion-back-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true" class="auth-content">
  <section class="hero ion-padding-horizontal">
    <ion-img
      class="logo ion-padding-bottom"
      src="/assets/img/WeRecruit_logo.svg"
      alt="WeRecruit logo"
    ></ion-img>

    <p class="subtitle">Log in to your account</p>
  </section>

  @if (showBiometricButton) {
  <section class="auth-card ion-padding biometric-card">
    <ion-button
      expand="block"
      fill="outline"
      (click)="loginWithBiometric()"
      [disabled]="isBiometricLoading"
      class="ghost-btn"
      aria-label="Login with biometrics"
    >
      <ion-icon name="finger-print-outline" slot="start"></ion-icon>
      Login with {{ biometricType }} @if (isBiometricLoading) {
      <ion-spinner name="crescent" slot="end"></ion-spinner>
      }
    </ion-button>

    <div class="divider"><span>or</span></div>
  </section>
  }

  <section class="auth-card ion-padding">
    <form class="form-default" [formGroup]="signin_form" (submit)="signIn()">
      <ion-list class="form-list" lines="none">
        <ion-item class="field">
          <ion-input
            label="Email"
            labelPlacement="stacked"
            formControlName="email"
            type="email"
            placeholder="you@example.com"
            autocapitalize="off"
            autocomplete="email"
            inputmode="email"
          ></ion-input>
        </ion-item>

        <ion-item class="field ion-margin-top">
          <ion-input
            label="Password"
            labelPlacement="stacked"
            formControlName="password"
            type="password"
            placeholder="Your password"
            autocomplete="current-password"
          >
            <ion-input-password-toggle slot="end"></ion-input-password-toggle>
          </ion-input>
        </ion-item>
      </ion-list>

      <ion-button
        class="primary-btn ion-margin-top"
        type="submit"
        expand="block"
        color="primary"
      >
        <ion-icon name="log-in-outline" slot="start"></ion-icon>
        Sign in
      </ion-button>

      <ion-loading
        [isOpen]="isLoading"
        message="Signing in..."
        spinner="crescent"
        translucent="true"
        backdropDismiss="false"
      ></ion-loading>

      <ion-button
        color="primary"
        fill="clear"
        expand="block"
        class="ion-button-small ion-margin-top-medium"
        routerLink="/password-reset"
      >
        Forgot password?
      </ion-button>
    </form>
  </section>
  <ion-toast
    [isOpen]="toastOption.show"
    position="top"
    [color]="toastOption.color"
    [message]="toastOption.message"
    duration="4000"
    keyboardClose="true"
    (didDismiss)="setToast()"
  ></ion-toast>

  <div class="copyright ion-text-center">
    <ion-text color="medium">
      <small>&copy; 2025 WeRecruit</small>
    </ion-text>
  </div>
</ion-content>

<ion-alert
  [isOpen]="isAlertOpen"
  [header]="alertHeader"
  [message]="alertMessage"
  [buttons]="alertButtons"
  (didDismiss)="isAlertOpen = false"
></ion-alert>
