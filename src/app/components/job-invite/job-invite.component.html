<ion-header>
  <app-toolbar-back title="Job Offer"></app-toolbar-back>

  <div class="invite-container">
    <div class="invite-pill"></div>
  </div>
</ion-header>

<ion-content [fullscreen]="true">
  @if (loading()) {
  <div class="job-card skeleton">
    <ion-skeleton-text
      animated
      style="width: 60%; height: 22px"
    ></ion-skeleton-text>
    <ion-skeleton-text
      animated
      style="width: 30%; height: 16px"
    ></ion-skeleton-text>

    <div class="meta-skeleton">
      <ion-skeleton-text
        animated
        style="width: 80%; height: 16px"
      ></ion-skeleton-text>
      <ion-skeleton-text
        animated
        style="width: 70%; height: 16px"
      ></ion-skeleton-text>
      <ion-skeleton-text
        animated
        style="width: 60%; height: 16px"
      ></ion-skeleton-text>
      <ion-skeleton-text
        animated
        style="width: 55%; height: 16px"
      ></ion-skeleton-text>
      <ion-skeleton-text
        animated
        style="width: 45%; height: 16px"
      ></ion-skeleton-text>
    </div>

    <ion-skeleton-text
      animated
      style="width: 40%; height: 18px; margin-top: 16px"
    ></ion-skeleton-text>
    <ion-skeleton-text
      animated
      style="width: 100%; height: 60px"
    ></ion-skeleton-text>
  </div>
  } @else if (job()) {

  <div class="job-card">
    <header class="job-header">
      <h1 class="job-title">{{ jobTitle() }}</h1>
    </header>

    <section class="job-meta">
      <div class="meta-row">
        <div class="meta-icon">
          <ion-icon name="cash-outline" aria-hidden="true"></ion-icon>
        </div>
        <div class="meta-text">{{ payText() }}</div>
      </div>

      @if (clientName()) {
      <div class="meta-row">
        <div class="meta-icon">
          <ion-icon name="business-outline" aria-hidden="true"></ion-icon>
        </div>
        <div class="meta-text">{{ clientName() }}</div>
      </div>
      }

      <div class="meta-row">
        <div class="meta-icon">
          <ion-icon name="briefcase-outline" aria-hidden="true"></ion-icon>
        </div>
        <div class="meta-text">
          {{ job()?.hours }}
        </div>
      </div>

      @if (hasDates()) {
      <div class="meta-row">
        <div class="meta-icon">
          <ion-icon name="calendar-outline" aria-hidden="true"></ion-icon>
        </div>
        <div class="meta-text">
          @if (startDateText()) {
          {{ startDateText() | date : "d MMM, y" }}
          } @if (startDateText() && endDateText()) { â€“ } @if (endDateText()) {
          {{ endDateText() | date : "d MMM, y" }}
          }
        </div>
      </div>
      }

      <div class="meta-row">
        <div class="meta-icon">
          <ion-icon name="location-outline" aria-hidden="true"></ion-icon>
        </div>
        <div class="meta-text">{{ locationText() }}</div>
      </div>
    </section>

    <section class="job-description">
      <h2 class="section-title">Job Description</h2>
      <p class="description-text">
        {{ job()?.projectInfo }}
      </p>
    </section>
  </div>

  } @else if (error()) {
  <div class="error">{{ error() }}</div>
  }
</ion-content>

<ion-footer class="ion-padding">
  <div class="btns">
    <ion-button
      expand="block"
      color="success"
      [disabled]="actioning()"
      (click)="accept()"
    >
      Accept
    </ion-button>

    <ion-button
      expand="block"
      color="danger"
      fill="outline"
      [disabled]="actioning()"
      (click)="decline()"
    >
      Decline
    </ion-button>
  </div>
</ion-footer>
